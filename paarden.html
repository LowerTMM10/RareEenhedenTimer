

<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Timer met paarden</title>
<style>
body {
  font-family: Arial, sans-serif;
  background-color: #f4f4f4;
  color: #333;
  width: 100vw;
  height: 100vh;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.container {
  width: 100%;
  height: 100%;
  padding: 20px;
  background-color: #fff;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: relative;
}

h1 {
  color: #007BFF;
}

.timer-status {
  font-size: 1.2em;
  margin-top: 10px;
}

button {
  padding: 10px 20px;
  background-color: #6c757d;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 16px;
  cursor: pointer;
  transition: background-color 0.3s ease;
  margin-top: 20px;
}
button:hover {
  background-color: #5a6268;
}

.train {
  position: absolute;
  width: 607px;
  height: 78px;
  top: 70%;
  transition: transform linear;
}
</style>
</head>
<body>

<div class="container">
  <h1>Paarden timer</h1>
  <p class="timer-status" id="statusText">De timer is ingesteld.</p>
  <button id="back-button">Terug</button>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const soundUrl = 'assets/alarm.mp3'; 
  const statusElement = document.getElementById('statusText');
  const backButton = document.getElementById('back-button');
  const audio = new Audio(soundUrl);

  const trains = ['assets/horse1.jpeg', 'assets/horse2.jpeg', 'assets/horse3.jpeg', 'assets/horse4.jpeg', 'assets/horse5.jpeg', 'assets/horse6.jpeg'];
  const container = document.querySelector('.container');

  function getCookie(name) {
    const cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
      let cookie = cookies[i].trim();
      if (cookie.startsWith(name + '=')) return cookie.substring(name.length + 1);
    }
    return null;
  }

  const timerDurationValue = getCookie('TimerDuur');
  const minutes = parseInt(timerDurationValue, 10);

  if (timerDurationValue === null || isNaN(minutes)) {
    statusElement.textContent = 'Fout: De "TimerDuur" cookie is niet gevonden of is geen geldig getal.';
    console.error('Cookie "TimerDuur" is niet gevonden of is geen geldig getal.');
  } else {
    const totalSeconds = minutes * 60;
    let remainingSeconds = totalSeconds;

    statusElement.textContent = `De timer is ingesteld op ${minutes} minuut${minutes === 1 ? '' : 'en'}.`;

    const timerInterval = setInterval(() => {
      remainingSeconds--;

      // 50% kans om een trein te laten verschijnen
      if (Math.random() < 0.125) {
        createTrain();
      }
      if (Math.random() < 0.125) {
        createTrain(true);
      }

      if (remainingSeconds < 0) {
        clearInterval(timerInterval);

          audio.play()
      }
    }, 1000);
  }

  backButton.addEventListener('click', () => window.history.back());

function createTrain(opposite = false) {
    const img = document.createElement('img');
    img.src = trains[Math.floor(Math.random() * trains.length)];
    img.className = 'train';
    container.appendChild(img);

// Willekeurige hoogte over het hele scherm
const containerHeight = container.clientHeight;

// Stel een minimum en maximum grootte vast voor je treinen
const minHeight = 90; // minimum hoogte in px
const maxHeight = 100; // maximum hoogte in px

// Bepaal de originele verhouding van je treinafbeelding (breedte / hoogte)
const originalRatio = 4;

// Genereer een willekeurige hoogte binnen de vastgestelde grenzen
const randomHeight = Math.random() * (maxHeight - minHeight) + minHeight;

// Bereken de bijbehorende breedte om de verhouding te behouden
const newWidth = randomHeight * originalRatio;

// Zorg ervoor dat de trein niet buiten het scherm valt, zowel verticaal als horizontaal
const maxTop = containerHeight - randomHeight;
const randomTop = Math.random() * maxTop;

// Pas de stijlen toe
img.style.top = randomTop + 'px';
img.style.height = randomHeight + 'px';
img.style.width = newWidth + 'px';

    // Random snelheid: tussen 5s en 12s
    const speed = 5 + Math.random() * 7;

    // Beginpositie
    if (!opposite) {
        img.style.transform = `translateX(-${img.width + 500}px)`; // start links buiten beeld
        setTimeout(() => {
            img.style.transition = `transform ${speed}s linear`;
            img.style.transform = `translateX(${window.innerWidth + 500}px)`; // rijdt naar rechts
        }, 50);
    } else {
        img.style.transform = `translateX(${window.innerWidth + 500}px)`; // start rechts buiten beeld
        setTimeout(() => {
            img.style.transition = `transform ${speed}s linear`;
            img.style.transform = `translateX(-${img.width + 500}px)`; // rijdt naar links
        }, 50);
    }

    img.addEventListener('transitionend', () => img.remove());
}
});
</script>

</body>
</html>
